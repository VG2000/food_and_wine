{% extends 'wine/base.html' %}
{% load crispy_forms_tags %}
{% block content %}


<header id="wine-list">
<section >
  <div class="container filter-section">
 <div class="col-md-12 wine-filter">
  <form method="GET" action="." name="WineFilterForm">
  <div class="form-row">
    <div class="form-group col-md-3">
      <label for="inputCountry">Country</label>
      <select
            id="chooseCountry"
            class="form-control form-control-sm"
            name="country"
          >
            <option value="" disabled selected>Select Country</option>
            {% for country in country %}
            <option name="cuisine-option" value="{{ country }}"
              >{{ country }}</option
            >
            {% endfor %}
          </select>
    </div>
    <div class="form-group col-md-3">
      <label for="inputRegion">Region</label>
      <select
            id="chooseRegion"
            class="form-control form-control-sm"
            name="region"
          >
            <option value="" disabled selected>Select Region</option>
            {% for region in region %}
            <option value="{{ region }}"
              >{{ region }}</option
            >
            {% endfor %}
          </select>
    </div>
    <div class="form-group col-md-2">
      <label for="inputRating">Rating</label>
      <input name="vg_rating" id="inputRating" type="text" class="form-control-sm" placeholder="Minimum Rating">
    </div>
    <button id="wine-filter-btn" type="submit" class="btn btn-primary">Filter</button>
  </div>
  </form>
</div>
</div>
</section>

<br>


<div class="container table-responsive-sm wine-list ">
    <table class="table table-striped table-bordered table-sm wine-table">
      <thead class="thead-dark">
        <tr>
          <th>Name</th>
          <th>Country</th>
          <th>Region</th>
          <th>Vintage</th>
          <th>Retailer</th>
          <th>Price</th>
          <th>Comment</th>
          <th>Blend</th>
          <th>Rating</th>
          <th>URL</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        {% for wine in wines %}
        <tr>
          <td>{{ wine.name }}</td>
          <td>{{ wine.country}}</td>
          <td>{{ wine.region }}</td>
          {% if wine.vintage%}
          <td>{{ wine.vintage }}</td>
          {% else %}
          <td></td>
          {% endif %}
          {% if wine.retailer%}
          <td>{{ wine.retailer }}</td>
          {% else %}
          <td></td>
          {% endif %}
          {% if wine.price %}
          <td>Â£{{ wine.price }}</td>
          {% else %}
          <td></td>
          {% endif%}
          <td>{{ wine.comment }}</td>
          <td>{{ wine.blend }}</td>
          <td>{{ wine.vg_rating }}</td>
          <td>
            {% if wine.url %}
            <a href="{{ wine.url }}" target="_blank">Link</a>
            {% else %}
            {% endif %}
          </td>
          <td>
            <a href="{% url 'wine-edit' wine.pk %}">Edit</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="12">No data.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</header>

 <script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous">
  </script>

 <script type="text/javascript">

  //TRY using blur event to capture dropdown value then figure out ajax request to query db
// document.getElementById('email').addEventListener('blur', validateEmail);

</script>


  {% endblock %}